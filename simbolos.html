<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√≠mbolos Sagrados - Reiki Nivel II</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f3e8ff;
        }
        .main-gradient {
            background-image: linear-gradient(135deg, #a855f7, #6366f1);
        }
        /* Canvas Styling */
        .drawing-canvas {
            touch-action: none;
            cursor: crosshair;
        }
        /* Pulsing Animation for Meditation */
        .pulsing-symbol {
            animation: pulse 4s infinite ease-in-out;
        }
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.7));
            }
            50% {
                transform: scale(1.05);
                filter: drop-shadow(0 0 15px rgba(255, 255, 255, 1));
            }
        }
        /* Fade-in-out for meditation keywords */
        .keyword {
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }
        .keyword.visible {
            opacity: 1;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header Section -->
    <header class="main-gradient text-white text-center py-12 sm:py-16 shadow-lg">
        <div class="container mx-auto px-4">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight">S√≠mbolos Sagrados</h1>
            <p class="mt-4 text-lg sm:text-xl font-light">Las Llaves de la Energ√≠a Universal</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12">

        <!-- Back Button -->
        <div class="mb-8">
            <a href="index.html" class="inline-flex items-center text-purple-700 hover:text-purple-900 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                Volver al Inicio
            </a>
        </div>

        <!-- Symbol Info Section -->
        <section class="mb-12">
            <h2 class="text-4xl font-bold text-purple-800">Cho Ku Rei (Cho-Ku-Rei)</h2>
            <p class="text-2xl text-gray-600 italic mt-2">"El S√≠mbolo del Poder"</p>
            <p class="text-lg leading-relaxed max-w-4xl mt-4">
                Su nombre se traduce como <strong>"Coloca el poder del universo aqu√≠"</strong>. Es una llave que canaliza y amplifica la energ√≠a, actuando como un interruptor de luz para potenciar el flujo de Reiki. Resuena con la energ√≠a de la Tierra y es ideal para energizar, purificar y anclar.
            </p>
        </section>

        <!-- Interactive Practice Section -->
        <section class="bg-white rounded-2xl shadow-xl p-4 sm:p-8">
            <!-- Practice Tabs -->
            <div class="border-b border-gray-200">
                <nav class="-mb-px flex flex-wrap sm:flex-nowrap space-x-2 sm:space-x-8" id="practice-tabs">
                    <button data-tab="trace" class="tab-btn whitespace-nowrap py-4 px-2 sm:px-4 border-b-2 font-medium text-lg text-purple-600 border-purple-600">‚úçÔ∏è Calcar</button>
                    <button data-tab="memory" class="tab-btn whitespace-nowrap py-4 px-2 sm:px-4 border-b-2 font-medium text-lg text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300">üß† Memorizar</button>
                    <button data-tab="meditate" class="tab-btn whitespace-nowrap py-4 px-2 sm:px-4 border-b-2 font-medium text-lg text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300">‚ú® Meditar</button>
                </nav>
            </div>

            <!-- Tab Content -->
            <div class="pt-8">
                <!-- Trace Tab Content -->
                <div id="trace-content" class="tab-content">
                    <p class="text-center text-gray-600 mb-4">Usa el mouse o tu dedo para calcar el s√≠mbolo y desarrollar tu memoria muscular.</p>
                    <div class="relative w-full max-w-md mx-auto aspect-square border-2 border-dashed border-gray-300 rounded-lg">
                        <canvas id="trace-canvas" class="drawing-canvas absolute top-0 left-0 w-full h-full"></canvas>
                        <img src="chokurei.png" alt="Gu√≠a para calcar el Cho Ku Rei" class="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none" id="trace-guide"/>
                    </div>
                    <div class="mt-4 flex justify-center space-x-4">
                        <button id="clear-trace-btn" class="bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-lg hover:bg-gray-400 transition-colors">Limpiar</button>
                    </div>
                </div>

                <!-- Memory Tab Content -->
                <div id="memory-content" class="tab-content hidden">
                     <div id="memory-start" class="text-center">
                        <p class="text-gray-600 mb-4">Observa el s√≠mbolo por 5 segundos, luego intenta dibujarlo de memoria.</p>
                        <button id="start-memory-btn" class="bg-purple-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-purple-700 transition-colors">Comenzar Test</button>
                    </div>
                    <div id="memory-view" class="text-center hidden">
                        <p class="text-gray-600 mb-4">¬°Memoriza!</p>
                        <img src="chokurei.png" alt="S√≠mbolo Cho Ku Rei para memorizar" class="w-full max-w-md mx-auto aspect-square"/>
                    </div>
                     <div id="memory-draw" class="hidden">
                        <p class="text-center text-gray-600 mb-2">¬°Tu turno! Dibuja el s√≠mbolo como lo recuerdes.</p>
                        <p class="text-center text-gray-500 italic mb-4">No importa si el trazo no es perfecto, lo que cuenta es tu intenci√≥n.</p>
                        <div class="relative w-full max-w-md mx-auto aspect-square border-2 border-gray-300 rounded-lg bg-white">
                            <canvas id="memory-canvas" class="drawing-canvas absolute top-0 left-0 w-full h-full"></canvas>
                            <img src="chokurei.png" alt="Soluci√≥n del trazado del Cho Ku Rei" id="memory-solution" class="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none hidden"/>
                        </div>
                        <div class="mt-4 flex justify-center space-x-4">
                            <button id="check-memory-btn" class="bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors">Verificar</button>
                            <button id="retry-memory-btn" class="bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-lg hover:bg-gray-400 transition-colors">Intentar de Nuevo</button>
                        </div>
                    </div>
                </div>

                <!-- Meditate Tab Content -->
                <div id="meditate-content" class="tab-content hidden text-center">
                    <p class="text-gray-600 mb-6">Enfoca tu mirada en el s√≠mbolo. Respira profundamente y conecta con su energ√≠a.</p>
                    <div class="relative w-full max-w-md mx-auto aspect-square flex items-center justify-center">
                         <img src="chokurei.png" alt="S√≠mbolo Cho Ku Rei para meditar" class="pulsing-symbol w-3/4 h-3/4"/>
                    </div>
                    <div id="keyword-container" class="mt-6 text-3xl font-bold text-purple-700 h-10">
                        <span class="keyword">Poder</span>
                        <span class="keyword">Purificar</span>
                        <span class="keyword">Anclar</span>
                        <span class="keyword">Aqu√≠ y Ahora</span>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="text-center py-8 px-4 mt-8">
        <p class="text-gray-500">&copy; 2024 Tu Rinc√≥n Zen. Creado con amor.</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        let traceCanvasController, memoryCanvasController;

        // --- Canvas Drawing Logic ---
        function setupCanvas(canvasId, clearBtnId, strokeColor = '#4c1d95') {
            const canvas = document.getElementById(canvasId);
            const clearBtn = document.getElementById(clearBtnId);
            if (!canvas) return null;

            const ctx = canvas.getContext('2d');
            let drawing = false;

            function resizeCanvas() {
                const { width, height } = canvas.getBoundingClientRect();
                if (width === 0 || height === 0) return; // Don't resize if hidden
                canvas.width = width;
                canvas.height = height;
                ctx.strokeStyle = strokeColor;
                ctx.lineWidth = 8;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
            }

            function getPos(e) {
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                return {
                    x: (clientX - rect.left) * scaleX,
                    y: (clientY - rect.top) * scaleY
                };
            }

            function startDrawing(e) {
                drawing = true;
                const { x, y } = getPos(e);
                ctx.beginPath();
                ctx.moveTo(x, y);
            }

            function draw(e) {
                if (!drawing) return;
                e.preventDefault();
                const { x, y } = getPos(e);
                ctx.lineTo(x, y);
                ctx.stroke();
            }

            function stopDrawing() {
                drawing = false;
            }
            
            function clearCanvas() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
            
            // Initial resize and listeners
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseleave', stopDrawing);
            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);
            if (clearBtn) {
                clearBtn.addEventListener('click', clearCanvas);
            }
            
            return { clear: clearCanvas, resize: resizeCanvas };
        }

        // Initialize canvases
        traceCanvasController = setupCanvas('trace-canvas', 'clear-trace-btn');
        memoryCanvasController = setupCanvas('memory-canvas', 'retry-memory-btn', '#000000');
        
        // --- General Tab Logic ---
        const tabs = document.querySelectorAll('.tab-btn');
        const contents = document.querySelectorAll('.tab-content');

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const target = tab.getAttribute('data-tab');

                tabs.forEach(t => {
                    t.classList.remove('text-purple-600', 'border-purple-600');
                    t.classList.add('text-gray-500', 'border-transparent');
                });
                tab.classList.add('text-purple-600', 'border-purple-600');
                tab.classList.remove('text-gray-500', 'border-transparent');

                contents.forEach(content => {
                    if (content.id === `${target}-content`) {
                        content.classList.remove('hidden');
                    } else {
                        content.classList.add('hidden');
                    }
                });

                // **FIX**: Resize canvas when its tab is shown
                if (target === 'trace' && traceCanvasController) {
                    traceCanvasController.resize();
                } else if (target === 'memory' && memoryCanvasController) {
                    memoryCanvasController.resize();
                }
            });
        });


        // --- Memory Test Logic ---
        const startMemoryBtn = document.getElementById('start-memory-btn');
        const checkMemoryBtn = document.getElementById('check-memory-btn');
        const retryMemoryBtn = document.getElementById('retry-memory-btn');
        const memoryStart = document.getElementById('memory-start');
        const memoryView = document.getElementById('memory-view');
        const memoryDraw = document.getElementById('memory-draw');
        const memorySolution = document.getElementById('memory-solution');

        startMemoryBtn.addEventListener('click', () => {
            memoryStart.classList.add('hidden');
            memoryView.classList.remove('hidden');
            setTimeout(() => {
                memoryView.classList.add('hidden');
                memoryDraw.classList.remove('hidden');
                // Ensure canvas is correctly sized after becoming visible
                if(memoryCanvasController) memoryCanvasController.resize();
            }, 5000); // 5 seconds
        });
        
        checkMemoryBtn.addEventListener('click', () => {
             memorySolution.classList.remove('hidden');
        });

        retryMemoryBtn.addEventListener('click', () => {
            memoryDraw.classList.add('hidden');
            memorySolution.classList.add('hidden');
            memoryStart.classList.remove('hidden');
            if(memoryCanvasController) memoryCanvasController.clear();
        });

        // --- Meditate Logic ---
        const keywords = document.querySelectorAll('#keyword-container .keyword');
        let currentKeyword = 0;
        if (keywords.length > 0) {
            setInterval(() => {
                keywords.forEach(kw => kw.classList.remove('visible'));
                keywords[currentKeyword].classList.add('visible');
                currentKeyword = (currentKeyword + 1) % keywords.length;
            }, 3000);
        }
    });
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>S√≠mbolos Sagrados - Reiki Nivel II</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f3e8ff;
        }
        .main-gradient {
            background-image: linear-gradient(135deg, #a855f7, #6366f1);
        }
        .drawing-canvas {
            touch-action: none;
            cursor: crosshair;
        }
        .pulsing-symbol {
            animation: pulse 4s infinite ease-in-out;
        }
        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.7));
            }
            50% {
                transform: scale(1.05);
                filter: drop-shadow(0 0 15px rgba(255, 255, 255, 1));
            }
        }
        .keyword {
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }
        .keyword.visible {
            opacity: 1;
        }
    </style>
</head>
<body class="text-gray-800">

    <!-- Header Section -->
    <header class="main-gradient text-white text-center py-12 sm:py-16 shadow-lg">
        <div class="container mx-auto px-4">
            <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight">S√≠mbolos Sagrados</h1>
            <p class="mt-4 text-lg sm:text-xl font-light">Las Llaves de la Energ√≠a Universal</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-6 py-12">

        <!-- Back Button -->
        <div class="mb-8">
            <a href="index.html" class="inline-flex items-center text-purple-700 hover:text-purple-900 transition-colors">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" /></svg>
                Volver al Inicio
            </a>
        </div>

        <!-- Main Symbol Tabs -->
        <div class="mb-8">
            <div class="border-b border-gray-300">
                <nav class="-mb-px flex space-x-6" id="main-symbol-tabs">
                    <button data-symbol="ckr" class="symbol-tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg text-purple-600 border-purple-600">Cho Ku Rei</button>
                    <button data-symbol="shk" class="symbol-tab-btn whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300">Sei He Ki</button>
                    <a href="#" class="whitespace-nowrap py-4 px-1 border-b-2 font-medium text-lg text-gray-400 cursor-not-allowed">Hon Sha Ze Sho Nen <span class="text-xs font-light">(Pr√≥ximamente)</span></a>
                </nav>
            </div>
        </div>

        <!-- CHO KU REI CONTENT WRAPPER -->
        <div id="ckr-content-wrapper" class="symbol-content-wrapper">
            <!-- Symbol Info Section -->
            <section class="mb-12">
                <h2 class="text-4xl font-bold text-purple-800">Cho Ku Rei (Cho-Ku-Rei)</h2>
                <p class="text-2xl text-gray-600 italic mt-2">"El S√≠mbolo del Poder"</p>
                <p class="text-lg leading-relaxed max-w-4xl mt-4">Su nombre se traduce como <strong>"Coloca el poder del universo aqu√≠"</strong>. Es una llave que canaliza y amplifica la energ√≠a, actuando como un interruptor de luz para potenciar el flujo de Reiki. Resuena con la energ√≠a de la Tierra y es ideal para energizar, purificar y anclar.</p>
            </section>

            <!-- Interactive Practice Section -->
            <section class="bg-white rounded-2xl shadow-xl p-4 sm:p-8">
                <div class="border-b border-gray-200">
                    <nav class="-mb-px flex flex-wrap sm:flex-nowrap space-x-2 sm:space-x-8 practice-tabs">
                        <button data-tab="trace" class="tab-btn whitespace-nowrap py-4 px-2 sm:px-4 border-b-2 font-medium text-lg text-purple-600 border-purple-600">‚úçÔ∏è Calcar</button>
                        <button data-tab="memory" class="tab-btn whitespace-nowrap py-4 px-2 sm:px-4 border-b-2 font-medium text-lg text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300">üß† Memorizar</button>
                        <button data-tab="meditate" class="tab-btn whitespace-nowrap py-4 px-2 sm:px-4 border-b-2 font-medium text-lg text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300">‚ú® Meditar</button>
                    </nav>
                </div>
                <div class="pt-8">
                    <div data-tab-content="trace" class="tab-content">
                        <p class="text-center text-gray-600 mb-4">Usa el mouse o tu dedo para calcar el s√≠mbolo y desarrollar tu memoria muscular.</p>
                        <div class="relative w-full max-w-md mx-auto aspect-square border-2 border-dashed border-gray-300 rounded-lg"><canvas id="trace-canvas-ckr" class="drawing-canvas absolute top-0 left-0 w-full h-full"></canvas><img src="chokurei.png" alt="Gu√≠a para calcar el Cho Ku Rei" class="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none"/></div>
                        <div class="mt-4 flex justify-center space-x-4"><button id="clear-trace-btn-ckr" class="bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-lg hover:bg-gray-400 transition-colors">Limpiar</button></div>
                    </div>
                    <div data-tab-content="memory" class="tab-content hidden">
                        <div class="memory-start text-center"><p class="text-gray-600 mb-4">Observa el s√≠mbolo por 5 segundos, luego intenta dibujarlo de memoria.</p><button class="start-memory-btn bg-purple-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-purple-700 transition-colors">Comenzar Test</button></div>
                        <div class="memory-view text-center hidden"><p class="text-gray-600 mb-4">¬°Memoriza!</p><img src="chokurei.png" alt="S√≠mbolo Cho Ku Rei para memorizar" class="w-full max-w-md mx-auto aspect-square"/></div>
                        <div class="memory-draw hidden"><p class="text-center text-gray-600 mb-2">¬°Tu turno! Dibuja el s√≠mbolo como lo recuerdes.</p><p class="text-center text-gray-500 italic mb-4">No importa si el trazo no es perfecto, lo que cuenta es tu intenci√≥n.</p><div class="relative w-full max-w-md mx-auto aspect-square border-2 border-gray-300 rounded-lg bg-white"><canvas id="memory-canvas-ckr" class="drawing-canvas absolute top-0 left-0 w-full h-full"></canvas><img src="chokurei.png" alt="Soluci√≥n del trazado del Cho Ku Rei" class="memory-solution absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none hidden"/></div><div class="mt-4 flex justify-center space-x-4"><button class="check-memory-btn bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors">Verificar</button><button class="retry-memory-btn bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-lg hover:bg-gray-400 transition-colors">Intentar de Nuevo</button></div></div>
                    </div>
                    <div data-tab-content="meditate" class="tab-content hidden text-center">
                        <p class="text-gray-600 mb-6">Enfoca tu mirada en el s√≠mbolo. Respira profundamente y conecta con su energ√≠a.</p>
                        <div class="relative w-full max-w-md mx-auto aspect-square flex items-center justify-center"><img src="chokurei.png" alt="S√≠mbolo Cho Ku Rei para meditar" class="pulsing-symbol w-3/4 h-3/4"/></div>
                        <div class="keyword-container mt-6 text-2xl md:text-3xl font-bold text-purple-700 h-10 flex items-center justify-center"><span class="keyword">Poder</span><span class="keyword">Purificar</span><span class="keyword">Anclar</span><span class="keyword">Aqu√≠ y Ahora</span></div>
                    </div>
                </div>
            </section>
            <section class="mt-12 bg-white rounded-2xl shadow-xl p-8">
                <h3 class="text-3xl font-bold text-purple-800 mb-8 text-center">Cho Ku Rei en Resumen</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-6 text-center shadow-md hover:shadow-lg transition-shadow duration-300"><div class="flex justify-center items-center h-12 w-12 rounded-full bg-white mx-auto mb-4 shadow"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M3.055 11H5a2 2 0 012 2v1a2 2 0 002 2h1a2 2 0 002-2v-1a2 2 0 012-2h1.945M12 4v7m0 0l-3-3m3 3l3-3" /></svg></div><h4 class="font-bold text-xl text-gray-700">Elemento: Tierra</h4><p class="text-gray-500 mt-1">Representa lo f√≠sico y la manifestaci√≥n.</p></div>
                    <div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-6 text-center shadow-md hover:shadow-lg transition-shadow duration-300"><div class="flex justify-center items-center h-12 w-12 rounded-full bg-white mx-auto mb-4 shadow"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-purple-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z" clip-rule="evenodd" /></svg></div><h4 class="font-bold text-xl text-gray-700">Polaridad: Femenina</h4><p class="text-gray-500 mt-1">Es energ√≠a receptiva y de anclaje.</p></div>
                    <div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-6 text-center shadow-md hover:shadow-lg transition-shadow duration-300"><div class="flex justify-center items-center h-12 w-12 rounded-full bg-white mx-auto mb-4 shadow"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" /></svg></div><h4 class="font-bold text-xl text-gray-700">Plano de Acci√≥n</h4><p class="text-gray-500 mt-1">Act√∫a sobre el cuerpo f√≠sico y lo material.</p></div>
                    <div class="bg-gradient-to-br from-purple-50 to-indigo-50 rounded-xl p-6 text-center shadow-md hover:shadow-lg transition-shadow duration-300"><div class="flex justify-center items-center h-12 w-12 rounded-full bg-white mx-auto mb-4 shadow"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-purple-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H5v-2H3v-2H1v-4a6 6 0 017.743-5.743z" /></svg></div><h4 class="font-bold text-xl text-gray-700">Verbos Clave</h4><p class="text-gray-500 mt-1">Potenciar, Purificar, Anclar, Proteger.</p></div>
                </div>
            </section>
        </div>

        <!-- SEI HE KI CONTENT WRAPPER -->
        <div id="shk-content-wrapper" class="symbol-content-wrapper hidden">
            <!-- Symbol Info Section -->
            <section class="mb-12">
                <h2 class="text-4xl font-bold text-indigo-800">Sei He Ki (Sei-He-Ki)</h2>
                <p class="text-2xl text-gray-600 italic mt-2">"El S√≠mbolo de la Armon√≠a"</p>
                <p class="text-lg leading-relaxed max-w-4xl mt-4">Su nombre se traduce como <strong>"Dios y Hombre se vuelven uno"</strong>. Act√∫a como un puente entre el cielo y la tierra, armonizando los planos mental y emocional. Resuena con la energ√≠a de la Luna y es la llave para sanar el subconsciente, liberar bloqueos emocionales y calmar la mente.</p>
            </section>

            <!-- Interactive Practice Section -->
            <section class="bg-white rounded-2xl shadow-xl p-4 sm:p-8">
                <div class="border-b border-gray-200">
                    <nav class="-mb-px flex flex-wrap sm:flex-nowrap space-x-2 sm:space-x-8 practice-tabs">
                        <button data-tab="trace" class="tab-btn whitespace-nowrap py-4 px-2 sm:px-4 border-b-2 font-medium text-lg text-purple-600 border-purple-600">‚úçÔ∏è Calcar</button>
                        <button data-tab="memory" class="tab-btn whitespace-nowrap py-4 px-2 sm:px-4 border-b-2 font-medium text-lg text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300">üß† Memorizar</button>
                        <button data-tab="meditate" class="tab-btn whitespace-nowrap py-4 px-2 sm:px-4 border-b-2 font-medium text-lg text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300">‚ú® Meditar</button>
                    </nav>
                </div>
                <div class="pt-8">
                    <div data-tab-content="trace" class="tab-content">
                        <p class="text-center text-gray-600 mb-4">Calca el s√≠mbolo para interiorizar su flujo y sus trazos.</p>
                        <div class="relative w-full max-w-md mx-auto aspect-square border-2 border-dashed border-gray-300 rounded-lg"><canvas id="trace-canvas-shk" class="drawing-canvas absolute top-0 left-0 w-full h-full"></canvas><img src="seiheki.png" alt="Gu√≠a para calcar el Sei He Ki" class="absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none"/></div>
                        <div class="mt-4 flex justify-center space-x-4"><button id="clear-trace-btn-shk" class="bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-lg hover:bg-gray-400 transition-colors">Limpiar</button></div>
                    </div>
                    <div data-tab-content="memory" class="tab-content hidden">
                        <div class="memory-start text-center"><p class="text-gray-600 mb-4">Observa el s√≠mbolo por 5 segundos, luego intenta dibujarlo de memoria.</p><button class="start-memory-btn bg-purple-600 text-white font-bold py-2 px-8 rounded-lg hover:bg-purple-700 transition-colors">Comenzar Test</button></div>
                        <div class="memory-view text-center hidden"><p class="text-gray-600 mb-4">¬°Memoriza!</p><img src="seiheki.png" alt="S√≠mbolo Sei He Ki para memorizar" class="w-full max-w-md mx-auto aspect-square"/></div>
                        <div class="memory-draw hidden"><p class="text-center text-gray-600 mb-2">¬°Tu turno! Dibuja el s√≠mbolo como lo recuerdes.</p><p class="text-center text-gray-500 italic mb-4">No importa si el trazo no es perfecto, lo que cuenta es tu intenci√≥n.</p><div class="relative w-full max-w-md mx-auto aspect-square border-2 border-gray-300 rounded-lg bg-white"><canvas id="memory-canvas-shk" class="drawing-canvas absolute top-0 left-0 w-full h-full"></canvas><img src="seiheki.png" alt="Soluci√≥n del trazado del Sei He Ki" class="memory-solution absolute top-0 left-0 w-full h-full opacity-20 pointer-events-none hidden"/></div><div class="mt-4 flex justify-center space-x-4"><button class="check-memory-btn bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-indigo-700 transition-colors">Verificar</button><button class="retry-memory-btn bg-gray-300 text-gray-700 font-bold py-2 px-6 rounded-lg hover:bg-gray-400 transition-colors">Intentar de Nuevo</button></div></div>
                    </div>
                    <div data-tab-content="meditate" class="tab-content hidden text-center">
                        <p class="text-gray-600 mb-6">Enfoca tu mirada en el s√≠mbolo. Respira profundamente y conecta con su energ√≠a.</p>
                        <div class="relative w-full max-w-md mx-auto aspect-square flex items-center justify-center"><img src="seiheki.png" alt="S√≠mbolo Sei He Ki para meditar" class="pulsing-symbol w-3/4 h-3/4"/></div>
                        <div class="keyword-container mt-6 text-2xl md:text-3xl font-bold text-indigo-700 h-10 flex items-center justify-center"><span class="keyword">Armon√≠a</span><span class="keyword">Sanaci√≥n</span><span class="keyword">Liberaci√≥n</span><span class="keyword">Equilibrio</span></div>
                    </div>
                </div>
            </section>
            <section class="mt-12 bg-white rounded-2xl shadow-xl p-8">
                <h3 class="text-3xl font-bold text-indigo-800 mb-8 text-center">Sei He Ki en Resumen</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-6 text-center shadow-md hover:shadow-lg transition-shadow duration-300"><div class="flex justify-center items-center h-12 w-12 rounded-full bg-white mx-auto mb-4 shadow"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg></div><h4 class="font-bold text-xl text-gray-700">Elemento: Luna / Agua</h4><p class="text-gray-500 mt-1">Representa las emociones y el subconsciente.</p></div>
                    <div class="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-6 text-center shadow-md hover:shadow-lg transition-shadow duration-300"><div class="flex justify-center items-center h-12 w-12 rounded-full bg-white mx-auto mb-4 shadow"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-indigo-500" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" /></svg></div><h4 class="font-bold text-xl text-gray-700">Polaridad: Masculina</h4><p class="text-gray-500 mt-1">Es energ√≠a activa y de proyecci√≥n.</p></div>
                    <div class="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-6 text-center shadow-md hover:shadow-lg transition-shadow duration-300"><div class="flex justify-center items-center h-12 w-12 rounded-full bg-white mx-auto mb-4 shadow"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div><h4 class="font-bold text-xl text-gray-700">Plano de Acci√≥n</h4><p class="text-gray-500 mt-1">Act√∫a sobre la mente y las emociones.</p></div>
                    <div class="bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-6 text-center shadow-md hover:shadow-lg transition-shadow duration-300"><div class="flex justify-center items-center h-12 w-12 rounded-full bg-white mx-auto mb-4 shadow"><svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7 text-indigo-500" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" /></svg></div><h4 class="font-bold text-xl text-gray-700">Verbos Clave</h4><p class="text-gray-500 mt-1">Armonizar, Sanar, Liberar, Equilibrar.</p></div>
                </div>
            </section>
        </div>

    </main>

    <footer class="text-center py-8 px-4 mt-8">
        <p class="text-gray-500">&copy; 2024 Tu Rinc√≥n Zen. Creado con amor.</p>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Canvas Setup ---
        const canvasControllers = {
            ckr: {
                trace: setupCanvas('trace-canvas-ckr', 'clear-trace-btn-ckr'),
                memory: setupCanvas('memory-canvas-ckr', null, '#000000')
            },
            shk: {
                trace: setupCanvas('trace-canvas-shk', 'clear-trace-btn-shk'),
                memory: setupCanvas('memory-canvas-shk', null, '#000000')
            }
        };

        // --- Main Symbol Tab Logic ---
        const mainSymbolTabs = document.querySelectorAll('.symbol-tab-btn');
        const symbolContentWrappers = document.querySelectorAll('.symbol-content-wrapper');

        mainSymbolTabs.forEach(tab => {
            tab.addEventListener('click', () => {
                const targetSymbol = tab.getAttribute('data-symbol');

                mainSymbolTabs.forEach(t => {
                    t.classList.remove('text-purple-600', 'border-purple-600');
                    t.classList.add('text-gray-500', 'border-transparent');
                });
                tab.classList.add('text-purple-600', 'border-purple-600');
                tab.classList.remove('text-gray-500', 'border-transparent');

                symbolContentWrappers.forEach(wrapper => {
                    if (wrapper.id === `${targetSymbol}-content-wrapper`) {
                        wrapper.classList.remove('hidden');
                    } else {
                        wrapper.classList.add('hidden');
                    }
                });
            });
        });

        // --- Practice Tab and Memory Test Logic for each symbol ---
        symbolContentWrappers.forEach(wrapper => {
            const practiceTabs = wrapper.querySelectorAll('.practice-tabs .tab-btn');
            const tabContents = wrapper.querySelectorAll('.tab-content');

            practiceTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetTab = tab.getAttribute('data-tab');
                    const symbol = wrapper.id.split('-')[0];

                    practiceTabs.forEach(t => {
                        t.classList.remove('text-purple-600', 'border-purple-600');
                        t.classList.add('text-gray-500', 'border-transparent');
                    });
                    tab.classList.add('text-purple-600', 'border-purple-600');

                    tabContents.forEach(content => {
                        if (content.getAttribute('data-tab-content') === targetTab) {
                            content.classList.remove('hidden');
                        } else {
                            content.classList.add('hidden');
                        }
                    });

                    const controller = canvasControllers[symbol]?.[targetTab];
                    if (controller) {
                        controller.resize();
                    }
                });
            });

            // Memory Test Logic
            const startBtn = wrapper.querySelector('.start-memory-btn');
            const checkBtn = wrapper.querySelector('.check-memory-btn');
            const retryBtn = wrapper.querySelector('.retry-memory-btn');
            const memoryStart = wrapper.querySelector('.memory-start');
            const memoryView = wrapper.querySelector('.memory-view');
            const memoryDraw = wrapper.querySelector('.memory-draw');
            const memorySolution = wrapper.querySelector('.memory-solution');
            const symbol = wrapper.id.split('-')[0];
            const memoryController = canvasControllers[symbol]?.memory;

            if (startBtn) {
                startBtn.addEventListener('click', () => {
                    memoryStart.classList.add('hidden');
                    memoryView.classList.remove('hidden');
                    setTimeout(() => {
                        memoryView.classList.add('hidden');
                        memoryDraw.classList.remove('hidden');
                        if (memoryController) memoryController.resize();
                    }, 5000);
                });
            }
            if (checkBtn) {
                checkBtn.addEventListener('click', () => {
                    memorySolution.classList.remove('hidden');
                });
            }
            if (retryBtn) {
                retryBtn.addEventListener('click', () => {
                    memoryDraw.classList.add('hidden');
                    memorySolution.classList.add('hidden');
                    memoryStart.classList.remove('hidden');
                    if (memoryController) memoryController.clear();
                });
            }
            
            // Meditation Logic
            const keywords = wrapper.querySelectorAll('.keyword-container .keyword');
            let currentKeyword = 0;
            if (keywords.length > 0) {
                keywords[currentKeyword].classList.add('visible');
                currentKeyword++;
                setInterval(() => {
                    keywords.forEach(kw => kw.classList.remove('visible'));
                    if (keywords[currentKeyword]) {
                       keywords[currentKeyword].classList.add('visible');
                    }
                    currentKeyword = (currentKeyword + 1) % keywords.length;
                }, 3000);
            }
        });

        // --- Generic Canvas Drawing Function ---
        function setupCanvas(canvasId, clearBtnId, strokeColor = '#4c1d95') {
            const canvas = document.getElementById(canvasId);
            if (!canvas) return null;
            const clearBtn = document.getElementById(clearBtnId);
            const ctx = canvas.getContext('2d');
            let drawing = false;

            function resizeCanvas() {
                const { width, height } = canvas.getBoundingClientRect();
                if (width === 0 || height === 0) return;
                canvas.width = width;
                canvas.height = height;
                ctx.strokeStyle = strokeColor;
                ctx.lineWidth = 8;
                ctx.lineCap = 'round';
                ctx.lineJoin = 'round';
            }

            function getPos(e) {
                const rect = canvas.getBoundingClientRect();
                const scaleX = canvas.width / rect.width;
                const scaleY = canvas.height / rect.height;
                const clientX = e.touches ? e.touches[0].clientX : e.clientX;
                const clientY = e.touches ? e.touches[0].clientY : e.clientY;
                return { 
                    x: (clientX - rect.left) * scaleX, 
                    y: (clientY - rect.top) * scaleY 
                };
            }

            function startDrawing(e) { drawing = true; const { x, y } = getPos(e); ctx.beginPath(); ctx.moveTo(x, y); }
            function draw(e) { if (!drawing) return; e.preventDefault(); const { x, y } = getPos(e); ctx.lineTo(x, y); ctx.stroke(); }
            function stopDrawing() { drawing = false; }
            function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }

            window.addEventListener('resize', resizeCanvas);
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseleave', stopDrawing);
            canvas.addEventListener('touchstart', startDrawing);
            canvas.addEventListener('touchmove', draw);
            canvas.addEventListener('touchend', stopDrawing);
            if (clearBtn) clearBtn.addEventListener('click', clearCanvas);
            
            resizeCanvas();
            return { clear: clearCanvas, resize: resizeCanvas };
        }
    });
    </script>
</body>
</html>
